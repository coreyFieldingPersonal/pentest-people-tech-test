import { IVulnerability } from "../types/VulnerabilityType"

const filterBySeverity = (item: IVulnerability, value: string) => {
    return item.severity == value
}

export async function fetchFilteredVulnerabilities(value: string) {
    try {
        const response = await fetch('http://localhost:3000/data').then(res => {
            if (res.ok) return res.json()
            else throw res
        })

        const filtered = response.filter((item: IVulnerability) => filterBySeverity(item, value))

        return filtered

    } catch (err) {
        console.log(err)
    }
}